Version 4
SHEET 1 1300 996
WIRE 208 -288 -160 -288
WIRE 416 -288 208 -288
WIRE 560 -288 416 -288
WIRE 208 -224 208 -288
WIRE -160 -208 -160 -288
WIRE 560 -208 560 -288
WIRE -304 -144 -432 -144
WIRE -976 -112 -976 -144
WIRE -304 -112 -304 -144
WIRE 416 -96 416 -288
WIRE 208 -80 208 -144
WIRE 368 -80 208 -80
WIRE -432 -48 -432 -144
WIRE 560 -48 560 -128
WIRE -624 0 -912 0
WIRE -304 32 -304 -32
WIRE -1872 48 -2000 48
WIRE -1792 48 -1872 48
WIRE -1648 48 -1728 48
WIRE -624 48 -624 0
WIRE -752 96 -752 -144
WIRE 208 128 208 -80
WIRE -1712 144 -1648 48
WIRE -1648 160 -1648 48
WIRE -1600 160 -1648 160
WIRE -1408 160 -1520 160
WIRE -1360 160 -1408 160
WIRE -912 160 -912 0
WIRE -912 160 -1280 160
WIRE -832 160 -912 160
WIRE -624 176 -624 128
WIRE -624 176 -672 176
WIRE -496 176 -624 176
WIRE -432 176 -432 32
WIRE -432 176 -496 176
WIRE -160 176 -160 -128
WIRE -16 176 -160 176
WIRE 144 176 64 176
WIRE -976 192 -976 -32
WIRE -832 192 -976 192
WIRE -432 224 -432 176
WIRE -336 224 -432 224
WIRE -224 224 -256 224
WIRE 416 224 416 0
WIRE -1408 240 -1408 160
WIRE 208 272 208 224
WIRE -976 384 -976 272
WIRE -752 384 -752 256
WIRE -752 384 -976 384
WIRE -1408 400 -1408 320
WIRE -160 400 -160 272
WIRE 208 400 208 352
WIRE -752 464 -752 384
WIRE -1712 496 -1712 144
WIRE 416 496 416 288
WIRE 416 496 -1648 496
WIRE 416 656 416 496
FLAG 208 400 0
FLAG 560 -48 0
FLAG -304 32 0
FLAG -752 464 0
FLAG -496 176 output
FLAG -160 400 0
FLAG -976 -224 0
FLAG -752 -224 0
FLAG -1408 400 0
FLAG -2000 128 0
FLAG -1872 48 input
IOPIN -1872 48 In
FLAG 416 656 out
IOPIN 416 656 Out
SYMBOL npn 144 128 R0
SYMATTR InstName Q1
SYMATTR Value BC846B
SYMBOL res 192 -240 R0
SYMATTR InstName R2
SYMATTR Value 2k
SYMBOL schottky 400 224 R0
SYMATTR InstName D_HVHV
SYMATTR Value MBR20100CT
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL voltage 560 -224 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V1
SYMATTR Value 30
SYMBOL LMV331 -768 176 R0
SYMATTR InstName U1
SYMBOL voltage -304 -128 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V3
SYMATTR Value 5
SYMBOL res -448 -64 R0
SYMATTR InstName R5
SYMATTR Value 2k
SYMBOL res -992 -128 R0
SYMATTR InstName R6
SYMATTR Value 39k
SYMBOL res -992 176 R0
SYMATTR InstName R7
SYMATTR Value 10k
SYMBOL voltage -2000 32 R0
WINDOW 3 24 96 Invisible 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value PWL(0 16 1m 16 2m 6 3m 6 4m 16 5m 16)
SYMATTR InstName Vin
SYMBOL res -640 32 R0
SYMATTR InstName R8
SYMATTR Value 60k4
SYMBOL res -1264 144 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 1.8k
SYMBOL res -1504 144 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 20k
SYMBOL res -1392 336 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R11
SYMATTR Value 2k
SYMBOL res 224 368 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R4
SYMATTR Value 1k
SYMBOL npn -224 176 R0
SYMATTR InstName Q2
SYMATTR Value BC846B
SYMBOL res -240 208 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 10k
SYMBOL res -176 -224 R0
SYMATTR InstName R14
SYMATTR Value 10k
SYMBOL pmos 368 0 M180
SYMATTR InstName M2
SYMATTR Value SQJ469EP
SYMBOL res 80 160 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 10k
SYMBOL voltage -976 -128 R180
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V2
SYMATTR Value 5
SYMBOL voltage -752 -128 R180
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V4
SYMATTR Value 5
SYMBOL schottky -1792 32 M90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D_HVHV1
SYMATTR Value MBR20100CT
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL schottky -1712 480 M90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D_HVHV2
SYMATTR Value MBR20100CT
SYMATTR Description Diode
SYMATTR Type diode
TEXT -1888 728 Left 2 !.tran 0 5m 0 50n
TEXT -1888 768 Left 2 ;replacing R5 with a 1.8k resistor shifts the hysteresis about 2 Volts up
TEXT -120 112 Left 1 ;BC846BPDW1 --> dual transistors
